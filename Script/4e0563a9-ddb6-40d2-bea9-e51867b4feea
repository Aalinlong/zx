function GetQueryString(e){var t=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(t);return null!=n?decodeURI(n[2]):null}function openurl(e){window.open(e,"nb","width="+screen.width+",height="+.88*screen.height+",location=no,directories=no,menubar=no,toolbar=no,scrollbars=no,status=yes,resizable=yes,left=0,top=0")}!function(s){"use strict";var r=function(e,t){this.options=t,this.$body=s(document.body),this.$element=s(e),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,s.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function a(o,i){return this.each(function(){var e=s(this),t=e.data("bs.modal"),n=s.extend({},r.DEFAULTS,e.data(),"object"==typeof o&&o);t||e.data("bs.modal",t=new r(this,n)),"string"==typeof o?t[o](i):n.show&&t.show(i)})}r.VERSION="3.3.7",r.TRANSITION_DURATION=300,r.BACKDROP_TRANSITION_DURATION=150,r.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},r.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},r.prototype.show=function(n){var o=this,e=s.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',s.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(e){s(e.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=s.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),e&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var t=s.Event("shown.bs.modal",{relatedTarget:n});e?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(t)}).emulateTransitionEnd(r.TRANSITION_DURATION):o.$element.trigger("focus").trigger(t)}))},r.prototype.hide=function(e){e&&e.preventDefault(),e=s.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),s(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),s.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",s.proxy(this.hideModal,this)).emulateTransitionEnd(r.TRANSITION_DURATION):this.hideModal())},r.prototype.enforceFocus=function(){s(document).off("focusin.bs.modal").on("focusin.bs.modal",s.proxy(function(e){document===e.target||this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},r.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",s.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},r.prototype.resize=function(){this.isShown?s(window).on("resize.bs.modal",s.proxy(this.handleUpdate,this)):s(window).off("resize.bs.modal")},r.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},r.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},r.prototype.backdrop=function(e){var t=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=s.support.transition&&n;if(this.$backdrop=s(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",s.proxy(function(e){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;o?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(r.BACKDROP_TRANSITION_DURATION):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){t.removeBackdrop(),e&&e()};s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(r.BACKDROP_TRANSITION_DURATION):i()}else e&&e()},r.prototype.handleUpdate=function(){this.adjustDialog()},r.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},r.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},r.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},r.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},r.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},r.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var e=s.fn.modal;s.fn.modal=a,s.fn.modal.Constructor=r,s.fn.modal.noConflict=function(){return s.fn.modal=e,this},s(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(e){var t=s(this),n=t.attr("href"),o=s(t.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),i=o.data("bs.modal")?"toggle":s.extend({remote:!/#/.test(n)&&n},o.data(),t.data());t.is("a")&&e.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){t.is(":visible")&&t.trigger("focus")})}),a.call(o,i,this)})}(jQuery),function(o){"use strict";o.fn.emulateTransitionEnd=function(e){var t=!1,n=this;o(this).one("bsTransitionEnd",function(){t=!0});return setTimeout(function(){t||o(n).trigger(o.support.transition.end)},e),this},o(function(){o.support.transition=function(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}(),o.support.transition&&(o.event.special.bsTransitionEnd={bindType:o.support.transition.end,delegateType:o.support.transition.end,handle:function(e){if(o(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(e){"use strict";function u(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e,t,n,o,i,s){return u((r=u(u(t,e),u(o,s)))<<(a=i)|r>>>32-a,n);var r,a}function h(e,t,n,o,i,s,r){return a(t&n|~t&o,e,t,i,s,r)}function m(e,t,n,o,i,s,r){return a(t&o|n&~o,e,t,i,s,r)}function f(e,t,n,o,i,s,r){return a(t^n^o,e,t,i,s,r)}function p(e,t,n,o,i,s,r){return a(n^(t|~o),e,t,i,s,r)}function d(e,t){var n,o,i,s,r;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var a=1732584193,d=-271733879,l=-1732584194,c=271733878;for(n=0;n<e.length;n+=16)d=p(d=p(d=p(d=p(d=f(d=f(d=f(d=f(d=m(d=m(d=m(d=m(d=h(d=h(d=h(d=h(i=d,l=h(s=l,c=h(r=c,a=h(o=a,d,l,c,e[n],7,-680876936),d,l,e[n+1],12,-389564586),a,d,e[n+2],17,606105819),c,a,e[n+3],22,-1044525330),l=h(l,c=h(c,a=h(a,d,l,c,e[n+4],7,-176418897),d,l,e[n+5],12,1200080426),a,d,e[n+6],17,-1473231341),c,a,e[n+7],22,-45705983),l=h(l,c=h(c,a=h(a,d,l,c,e[n+8],7,1770035416),d,l,e[n+9],12,-1958414417),a,d,e[n+10],17,-42063),c,a,e[n+11],22,-1990404162),l=h(l,c=h(c,a=h(a,d,l,c,e[n+12],7,1804603682),d,l,e[n+13],12,-40341101),a,d,e[n+14],17,-1502002290),c,a,e[n+15],22,1236535329),l=m(l,c=m(c,a=m(a,d,l,c,e[n+1],5,-165796510),d,l,e[n+6],9,-1069501632),a,d,e[n+11],14,643717713),c,a,e[n],20,-373897302),l=m(l,c=m(c,a=m(a,d,l,c,e[n+5],5,-701558691),d,l,e[n+10],9,38016083),a,d,e[n+15],14,-660478335),c,a,e[n+4],20,-405537848),l=m(l,c=m(c,a=m(a,d,l,c,e[n+9],5,568446438),d,l,e[n+14],9,-1019803690),a,d,e[n+3],14,-187363961),c,a,e[n+8],20,1163531501),l=m(l,c=m(c,a=m(a,d,l,c,e[n+13],5,-1444681467),d,l,e[n+2],9,-51403784),a,d,e[n+7],14,1735328473),c,a,e[n+12],20,-1926607734),l=f(l,c=f(c,a=f(a,d,l,c,e[n+5],4,-378558),d,l,e[n+8],11,-2022574463),a,d,e[n+11],16,1839030562),c,a,e[n+14],23,-35309556),l=f(l,c=f(c,a=f(a,d,l,c,e[n+1],4,-1530992060),d,l,e[n+4],11,1272893353),a,d,e[n+7],16,-155497632),c,a,e[n+10],23,-1094730640),l=f(l,c=f(c,a=f(a,d,l,c,e[n+13],4,681279174),d,l,e[n],11,-358537222),a,d,e[n+3],16,-722521979),c,a,e[n+6],23,76029189),l=f(l,c=f(c,a=f(a,d,l,c,e[n+9],4,-640364487),d,l,e[n+12],11,-421815835),a,d,e[n+15],16,530742520),c,a,e[n+2],23,-995338651),l=p(l,c=p(c,a=p(a,d,l,c,e[n],6,-198630844),d,l,e[n+7],10,1126891415),a,d,e[n+14],15,-1416354905),c,a,e[n+5],21,-57434055),l=p(l,c=p(c,a=p(a,d,l,c,e[n+12],6,1700485571),d,l,e[n+3],10,-1894986606),a,d,e[n+10],15,-1051523),c,a,e[n+1],21,-2054922799),l=p(l,c=p(c,a=p(a,d,l,c,e[n+8],6,1873313359),d,l,e[n+15],10,-30611744),a,d,e[n+6],15,-1560198380),c,a,e[n+13],21,1309151649),l=p(l,c=p(c,a=p(a,d,l,c,e[n+4],6,-145523070),d,l,e[n+11],10,-1120210379),a,d,e[n+2],15,718787259),c,a,e[n+9],21,-343485551),a=u(a,o),d=u(d,i),l=u(l,s),c=u(c,r);return[a,d,l,c]}function l(e){var t,n="",o=32*e.length;for(t=0;t<o;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function c(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var o=8*e.length;for(t=0;t<o;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function o(e){var t,n,o="0123456789abcdef",i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+=o.charAt(t>>>4&15)+o.charAt(15&t);return i}function n(e){return unescape(encodeURIComponent(e))}function i(e){return l(d(c(t=n(e)),8*t.length));var t}function s(e,t){return function(e,t){var n,o,i=c(e),s=[],r=[];for(s[15]=r[15]=void 0,16<i.length&&(i=d(i,8*e.length)),n=0;n<16;n+=1)s[n]=909522486^i[n],r[n]=1549556828^i[n];return o=d(s.concat(c(t)),512+8*t.length),l(d(r.concat(o),640))}(n(e),n(t))}function t(e,t,n){return t?n?s(t,e):o(s(t,e)):n?i(e):o(i(e))}"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:e.md5=t}(this),$(function(){!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)&&(window.location.href="m/login.html");var e=SystemStorage.getValue("remember_userinfo")||"false";$("#remember_userinfo").prop("checked","true"==e),"true"==e?$("#username").val(SystemStorage.getValue("userinfo_name")):$("#username").focus(),$("#remember_userinfo").on("change",function(e){var t=$(e.currentTarget).prop("checked");SystemStorage.setValue("remember_userinfo",t)}),$("#btn_ensure").on("click",function(){d()}),$(".form-tip").on("click",function(){$(this).removeClass("active")}),$("input").keyup(function(e){13===e.keyCode&&("username"==e.currentTarget.id&&""==$("#password").val()?$("#password").focus():(d(),this.blur()))});var o=null;function i(e,t){var n=$(".form-tip");n.addClass("active"),$(".form-tip .info").html(e),t&&(clearTimeout(o),o=setTimeout(function(){n.removeClass("active")},1e3))}var t,n,s,r,a=(t=navigator.platform,n=navigator.userAgent,s={},r="",-1<t.indexOf("Win")?-1<n.indexOf("Windows NT 5.0")?s.systemType="Win2000":-1<n.indexOf("Windows NT 5.1")?s.systemType="WinXP":-1<n.indexOf("Windows NT 5.2")?s.systemType="Win2003":-1<n.indexOf("Windows NT 6.0")?s.systemType="WindowsVista":-1<n.indexOf("Windows NT 6.1")||-1<n.indexOf("Windows 7")?s.systemType="Win7":-1<n.indexOf("Windows 8")?s.systemType="Win8":-1<n.indexOf("Windows NT 10")?s.systemType="Win10":s.systemType="Other":-1<t.indexOf("Mac")?s.systemType="Mac":-1<t.indexOf("X11")?s.systemType="Unix":-1<t.indexOf("Linux")?s.systemType="Linux":s.systemType="Other",/[Ff]irefox(\/\d+\.\d+)/.test(n)?(r=/([Ff]irefox)\/(\d+\.\d+)/.exec(n),s.browserType=r[1]+r[2]):/MSIE \d+\.\d+/.test(n)?(r=/MS(IE) (\d+\.\d+)/.exec(n),s.browserType=r[1]+r[2]):/[Cc]hrome\/\d+/.test(n)?(r=/([Cc]hrome)\/(\d+)/.exec(n),s.browserType=r[1]+r[2]):/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(n)?(r=/[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(n),s.browserType=r[3]+r[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(n)?(r=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(n),s.browserType=r[1]+r[2]):s.browserType="unknown",s);function d(){var t=$("#username"),e=$("#password"),n=$("#remember_userinfo").prop("checked");if(""==t.val())return i("请输入用户名!",!0),void t.focus();if(""==e.val())return i("请输入登录密码!",!0),void e.focus();e.blur(),i("登录中，请稍等。。。"),l(!0);var o={username:t.val(),password:md5(md5(e.val())),clientinfo:{type:"pc",systemType:a.systemType,browserType:a.browserType}};sessionStorage.enableDebug,$.ajax({type:"POST",url:sessionStorage.api+"/webapp/login",data:o,timeout:3e4,success:function(e){1===e.result?(e.login_type="password",sessionStorage.setItem("user",JSON.stringify(e)),n?SystemStorage.setValue("userinfo_name",t.val()):SystemStorage.removeValue("userinfo_name"),location.href="main.html"):($(".form").removeClass().addClass("form"),l(!1),i(e.err_msg,!0))},error:function(){l(!1),i("登录请求出错!",!0)}})}$("#btn_try").on("click",function(){$("#loading").addClass("active"),$.ajax({type:"POST",url:sessionStorage.api+"/webapp/test_user",timeout:1e4,success:function(e){if($("#loading").removeClass("active"),1===e.result){var t={username:e.username,password:e.password,clientinfo:{type:"pc",systemType:a.systemType,browserType:a.browserType}};$("#loading").addClass("active"),$.ajax({type:"POST",url:sessionStorage.api+"/webapp/login",data:t,timeout:1e4,success:function(e){$("#loading").removeClass("active"),1===e.result?(e.login_type="try",sessionStorage.setItem("user",JSON.stringify(e)),location.href="main.html"):i(e.err_msg,!0)},error:function(){$("#loading").removeClass("active"),i("登录请求出错!",!0)}})}else $(".btns-login button").removeAttr("disabled"),i(e.err_msg,!0)},error:function(){$("#loading").removeClass("active"),i("登录请求出错!",!0)}})});var l=function(e){$("#username").attr("disabled",e),$("#password").attr("disabled",e),e?($("#loading").addClass("active"),$("#btn_ensure").hide()):($("#loading").removeClass("active"),$("#btn_ensure").show())}});