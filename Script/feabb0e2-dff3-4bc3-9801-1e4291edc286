!function(s){"use strict";var r=function(t,e){this.options=e,this.$body=s(document.body),this.$element=s(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,s.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};function a(o,i){return this.each(function(){var t=s(this),e=t.data("bs.modal"),n=s.extend({},r.DEFAULTS,t.data(),"object"==typeof o&&o);e||t.data("bs.modal",e=new r(this,n)),"string"==typeof o?e[o](i):n.show&&e.show(i)})}r.VERSION="3.3.7",r.TRANSITION_DURATION=300,r.BACKDROP_TRANSITION_DURATION=150,r.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},r.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},r.prototype.show=function(n){var o=this,t=s.Event("show.bs.modal",{relatedTarget:n});this.$element.trigger(t),this.isShown||t.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',s.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){o.$element.one("mouseup.dismiss.bs.modal",function(t){s(t.target).is(o.$element)&&(o.ignoreBackdropClick=!0)})}),this.backdrop(function(){var t=s.support.transition&&o.$element.hasClass("fade");o.$element.parent().length||o.$element.appendTo(o.$body),o.$element.show().scrollTop(0),o.adjustDialog(),t&&o.$element[0].offsetWidth,o.$element.addClass("in"),o.enforceFocus();var e=s.Event("shown.bs.modal",{relatedTarget:n});t?o.$dialog.one("bsTransitionEnd",function(){o.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(r.TRANSITION_DURATION):o.$element.trigger("focus").trigger(e)}))},r.prototype.hide=function(t){t&&t.preventDefault(),t=s.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),s(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),s.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",s.proxy(this.hideModal,this)).emulateTransitionEnd(r.TRANSITION_DURATION):this.hideModal())},r.prototype.enforceFocus=function(){s(document).off("focusin.bs.modal").on("focusin.bs.modal",s.proxy(function(t){document===t.target||this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},r.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",s.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},r.prototype.resize=function(){this.isShown?s(window).on("resize.bs.modal",s.proxy(this.handleUpdate,this)):s(window).off("resize.bs.modal")},r.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$body.removeClass("modal-open"),t.resetAdjustments(),t.resetScrollbar(),t.$element.trigger("hidden.bs.modal")})},r.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},r.prototype.backdrop=function(t){var e=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=s.support.transition&&n;if(this.$backdrop=s(document.createElement("div")).addClass("modal-backdrop "+n).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",s.proxy(function(t){this.ignoreBackdropClick?this.ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide())},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(r.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var i=function(){e.removeBackdrop(),t&&t()};s.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",i).emulateTransitionEnd(r.BACKDROP_TRANSITION_DURATION):i()}else t&&t()},r.prototype.handleUpdate=function(){this.adjustDialog()},r.prototype.adjustDialog=function(){var t=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&t?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!t?this.scrollbarWidth:""})},r.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},r.prototype.checkScrollbar=function(){var t=window.innerWidth;if(!t){var e=document.documentElement.getBoundingClientRect();t=e.right-Math.abs(e.left)}this.bodyIsOverflowing=document.body.clientWidth<t,this.scrollbarWidth=this.measureScrollbar()},r.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",t+this.scrollbarWidth)},r.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},r.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var t=s.fn.modal;s.fn.modal=a,s.fn.modal.Constructor=r,s.fn.modal.noConflict=function(){return s.fn.modal=t,this},s(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(t){var e=s(this),n=e.attr("href"),o=s(e.attr("data-target")||n&&n.replace(/.*(?=#[^\s]+$)/,"")),i=o.data("bs.modal")?"toggle":s.extend({remote:!/#/.test(n)&&n},o.data(),e.data());e.is("a")&&t.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){e.is(":visible")&&e.trigger("focus")})}),a.call(o,i,this)})}(jQuery),function(o){"use strict";o.fn.emulateTransitionEnd=function(t){var e=!1,n=this;o(this).one("bsTransitionEnd",function(){e=!0});return setTimeout(function(){e||o(n).trigger(o.support.transition.end)},t),this},o(function(){o.support.transition=function(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}(),o.support.transition&&(o.event.special.bsTransitionEnd={bindType:o.support.transition.end,delegateType:o.support.transition.end,handle:function(t){if(o(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}})})}(jQuery),function(r){"use strict";var a='[data-toggle="dropdown"]',o=function(t){r(t).on("click.bs.dropdown",this.toggle)};function d(t){var e=t.attr("data-target");e||(e=(e=t.attr("href"))&&/#[A-Za-z]/.test(e)&&e.replace(/.*(?=#[^\s]*$)/,""));var n=e&&r(e);return n&&n.length?n:t.parent()}function s(o){o&&3===o.which||(r(".dropdown-backdrop").remove(),r(a).each(function(){var t=r(this),e=d(t),n={relatedTarget:this};e.hasClass("open")&&(o&&"click"==o.type&&/input|textarea/i.test(o.target.tagName)&&r.contains(e[0],o.target)||(e.trigger(o=r.Event("hide.bs.dropdown",n)),o.isDefaultPrevented()||(t.attr("aria-expanded","false"),e.removeClass("open").trigger(r.Event("hidden.bs.dropdown",n)))))}))}o.VERSION="3.3.7",o.prototype.toggle=function(t){var e=r(this);if(!e.is(".disabled, :disabled")){var n=d(e),o=n.hasClass("open");if(s(),!o){"ontouchstart"in document.documentElement&&!n.closest(".navbar-nav").length&&r(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(r(this)).on("click",s);var i={relatedTarget:this};if(n.trigger(t=r.Event("show.bs.dropdown",i)),t.isDefaultPrevented())return;e.trigger("focus").attr("aria-expanded","true"),n.toggleClass("open").trigger(r.Event("shown.bs.dropdown",i))}return!1}},o.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var e=r(this);if(t.preventDefault(),t.stopPropagation(),!e.is(".disabled, :disabled")){var n=d(e),o=n.hasClass("open");if(!o&&27!=t.which||o&&27==t.which)return 27==t.which&&n.find(a).trigger("focus"),e.trigger("click");var i=n.find(".dropdown-menu li:not(.disabled):visible a");if(i.length){var s=i.index(t.target);38==t.which&&0<s&&s--,40==t.which&&s<i.length-1&&s++,~s||(s=0),i.eq(s).trigger("focus")}}}};var t=r.fn.dropdown;r.fn.dropdown=function(n){return this.each(function(){var t=r(this),e=t.data("bs.dropdown");e||t.data("bs.dropdown",e=new o(this)),"string"==typeof n&&e[n].call(t)})},r.fn.dropdown.Constructor=o,r.fn.dropdown.noConflict=function(){return r.fn.dropdown=t,this},r(document).on("click.bs.dropdown.data-api",s).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",a,o.prototype.toggle).on("keydown.bs.dropdown.data-api",a,o.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",o.prototype.keydown)}(jQuery),function(t){"use strict";function h(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function a(t,e,n,o,i,s){return h((r=h(h(e,t),h(o,s)))<<(a=i)|r>>>32-a,n);var r,a}function u(t,e,n,o,i,s,r){return a(e&n|~e&o,t,e,i,s,r)}function p(t,e,n,o,i,s,r){return a(e&o|n&~o,t,e,i,s,r)}function f(t,e,n,o,i,s,r){return a(e^n^o,t,e,i,s,r)}function m(t,e,n,o,i,s,r){return a(n^(e|~o),t,e,i,s,r)}function d(t,e){var n,o,i,s,r;t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;var a=1732584193,d=-271733879,l=-1732584194,c=271733878;for(n=0;n<t.length;n+=16)d=m(d=m(d=m(d=m(d=f(d=f(d=f(d=f(d=p(d=p(d=p(d=p(d=u(d=u(d=u(d=u(i=d,l=u(s=l,c=u(r=c,a=u(o=a,d,l,c,t[n],7,-680876936),d,l,t[n+1],12,-389564586),a,d,t[n+2],17,606105819),c,a,t[n+3],22,-1044525330),l=u(l,c=u(c,a=u(a,d,l,c,t[n+4],7,-176418897),d,l,t[n+5],12,1200080426),a,d,t[n+6],17,-1473231341),c,a,t[n+7],22,-45705983),l=u(l,c=u(c,a=u(a,d,l,c,t[n+8],7,1770035416),d,l,t[n+9],12,-1958414417),a,d,t[n+10],17,-42063),c,a,t[n+11],22,-1990404162),l=u(l,c=u(c,a=u(a,d,l,c,t[n+12],7,1804603682),d,l,t[n+13],12,-40341101),a,d,t[n+14],17,-1502002290),c,a,t[n+15],22,1236535329),l=p(l,c=p(c,a=p(a,d,l,c,t[n+1],5,-165796510),d,l,t[n+6],9,-1069501632),a,d,t[n+11],14,643717713),c,a,t[n],20,-373897302),l=p(l,c=p(c,a=p(a,d,l,c,t[n+5],5,-701558691),d,l,t[n+10],9,38016083),a,d,t[n+15],14,-660478335),c,a,t[n+4],20,-405537848),l=p(l,c=p(c,a=p(a,d,l,c,t[n+9],5,568446438),d,l,t[n+14],9,-1019803690),a,d,t[n+3],14,-187363961),c,a,t[n+8],20,1163531501),l=p(l,c=p(c,a=p(a,d,l,c,t[n+13],5,-1444681467),d,l,t[n+2],9,-51403784),a,d,t[n+7],14,1735328473),c,a,t[n+12],20,-1926607734),l=f(l,c=f(c,a=f(a,d,l,c,t[n+5],4,-378558),d,l,t[n+8],11,-2022574463),a,d,t[n+11],16,1839030562),c,a,t[n+14],23,-35309556),l=f(l,c=f(c,a=f(a,d,l,c,t[n+1],4,-1530992060),d,l,t[n+4],11,1272893353),a,d,t[n+7],16,-155497632),c,a,t[n+10],23,-1094730640),l=f(l,c=f(c,a=f(a,d,l,c,t[n+13],4,681279174),d,l,t[n],11,-358537222),a,d,t[n+3],16,-722521979),c,a,t[n+6],23,76029189),l=f(l,c=f(c,a=f(a,d,l,c,t[n+9],4,-640364487),d,l,t[n+12],11,-421815835),a,d,t[n+15],16,530742520),c,a,t[n+2],23,-995338651),l=m(l,c=m(c,a=m(a,d,l,c,t[n],6,-198630844),d,l,t[n+7],10,1126891415),a,d,t[n+14],15,-1416354905),c,a,t[n+5],21,-57434055),l=m(l,c=m(c,a=m(a,d,l,c,t[n+12],6,1700485571),d,l,t[n+3],10,-1894986606),a,d,t[n+10],15,-1051523),c,a,t[n+1],21,-2054922799),l=m(l,c=m(c,a=m(a,d,l,c,t[n+8],6,1873313359),d,l,t[n+15],10,-30611744),a,d,t[n+6],15,-1560198380),c,a,t[n+13],21,1309151649),l=m(l,c=m(c,a=m(a,d,l,c,t[n+4],6,-145523070),d,l,t[n+11],10,-1120210379),a,d,t[n+2],15,718787259),c,a,t[n+9],21,-343485551),a=h(a,o),d=h(d,i),l=h(l,s),c=h(c,r);return[a,d,l,c]}function l(t){var e,n="",o=32*t.length;for(e=0;e<o;e+=8)n+=String.fromCharCode(t[e>>5]>>>e%32&255);return n}function c(t){var e,n=[];for(n[(t.length>>2)-1]=void 0,e=0;e<n.length;e+=1)n[e]=0;var o=8*t.length;for(e=0;e<o;e+=8)n[e>>5]|=(255&t.charCodeAt(e/8))<<e%32;return n}function o(t){var e,n,o="0123456789abcdef",i="";for(n=0;n<t.length;n+=1)e=t.charCodeAt(n),i+=o.charAt(e>>>4&15)+o.charAt(15&e);return i}function n(t){return unescape(encodeURIComponent(t))}function i(t){return l(d(c(e=n(t)),8*e.length));var e}function s(t,e){return function(t,e){var n,o,i=c(t),s=[],r=[];for(s[15]=r[15]=void 0,16<i.length&&(i=d(i,8*t.length)),n=0;n<16;n+=1)s[n]=909522486^i[n],r[n]=1549556828^i[n];return o=d(s.concat(c(e)),512+8*e.length),l(d(r.concat(o),640))}(n(t),n(e))}function e(t,e,n){return e?n?s(e,t):o(s(e,t)):n?i(t):o(i(t))}"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:t.md5=e}(this),$(function(){Handlebars.registerHelper("equal",function(t,e,n){if(t==e)return n.fn(this)}),!!navigator.userAgent.match(/AppleWebKit.*Mobile.*/)&&(window.location.href="m/login.html");var t={bright:"炫彩版"},e=localStorage.theme||"bright";$('input[name="select-theme"]').on("change",function(){var e=$('input[name="select-theme"]:checked').val();"bright"==(localStorage.theme=e)?o=n():clearInterval(o),$.ajax({type:"GET",url:"theme-manifest.json",dataType:"json",success:function(t){$("#link_theme").attr("href","styles/theme/"+t["login."+e+".css"])},error:function(){$("#link_theme").attr("href","styles/theme/login."+e+".css")}}),$("#btn_theme").html(t[e])}).on("click",function(){$("#modal_theme_select").modal("hide")}),localStorage.theme||($("#modal_theme_select").modal("show"),localStorage.theme=e),$('input[name="select-theme"][value="'+e+'"]').attr("checked","checked"),$("#btn_theme").html(t[e]);var n=function(){var t=0,e=$(".bg-list > div").size();return setInterval(function(){e<=++t&&(t=0),$(".bg-list > div.active").removeClass("active"),$('.bg-list > div:eq("'+t+'")').addClass("active")},8e3)},o=0;"bright"==e&&(o=n()),sessionStorage.removeItem("loginUrl"),$("#ensure").on("click",function(){d()}),$("input").keyup(function(t){13===t.keyCode&&d()});var i=null;function s(t,e){$(".alert-warning").html(t).show(),e&&(clearTimeout(i),i=setTimeout(function(){$(".alert-warning").hide()},4e3))}var r=function(t){$("#username").attr("disabled",t),$("#password").attr("disabled",t),t?($("#ensure").parents(".form-group").hide(),$(".loading").show()):($("#ensure").parents(".form-group").show(),$(".loading").hide())},a=function(){var t=navigator.platform,e=navigator.userAgent,n={},o="";return-1<t.indexOf("Win")?-1<e.indexOf("Windows NT 5.0")?n.systemType="Win2000":-1<e.indexOf("Windows NT 5.1")?n.systemType="WinXP":-1<e.indexOf("Windows NT 5.2")?n.systemType="Win2003":-1<e.indexOf("Windows NT 6.0")?n.systemType="WindowsVista":-1<e.indexOf("Windows NT 6.1")||-1<e.indexOf("Windows 7")?n.systemType="Win7":-1<e.indexOf("Windows 8")?n.systemType="Win8":-1<e.indexOf("Windows NT 10")?n.systemType="Win10":n.systemType="Other":-1<t.indexOf("Mac")?n.systemType="Mac":-1<t.indexOf("X11")?n.systemType="Unix":-1<t.indexOf("Linux")?n.systemType="Linux":n.systemType="Other",/[Ff]irefox(\/\d+\.\d+)/.test(e)?(o=/([Ff]irefox)\/(\d+\.\d+)/.exec(e),n.browserType=o[1]+o[2]):/MSIE \d+\.\d+/.test(e)?(o=/MS(IE) (\d+\.\d+)/.exec(e),n.browserType=o[1]+o[2]):/[Cc]hrome\/\d+/.test(e)?(o=/([Cc]hrome)\/(\d+)/.exec(e),n.browserType=o[1]+o[2]):/[Vv]ersion\/\d+\.\d+\.\d+(\.\d)* *[Ss]afari/.test(e)?(o=/[Vv]ersion\/(\d+\.\d+\.\d+)(\.\d)* *([Ss]afari)/.exec(e),n.browserType=o[3]+o[1]):/[Oo]pera.+[Vv]ersion\/\d+\.\d+/.test(e)?(o=/([Oo]pera).+[Vv]ersion\/(\d+)\.\d+/.exec(e),n.browserType=o[1]+o[2]):n.browserType="unknown",n};function d(){var t=$("#username"),e=$("#password");if(""==t.val())return s("请输入用户名!",!0),void t.focus();if(""==e.val())return s("请输入登录密码!",!0),void e.focus();r(!0),s("登录中，请稍等。。。");var n=a(),o={username:t.val(),password:md5(md5(e.val())),clientinfo:{type:"pc",systemType:n.systemType,browserType:n.browserType}};sessionStorage.enableDebug,$.ajax({type:"POST",url:sessionStorage.api+"/webapp/login",data:o,success:function(t){1===t.result?(sessionStorage.setItem("user",JSON.stringify(t)),location.href="main.html"):($(".form").removeClass().addClass("form"),setTimeout(function(){$(".form").addClass("animated shake")},0),r(!1),s(t.err_msg,!0))},error:function(){r(!1),s("登录请求出错!",!0)}})}});